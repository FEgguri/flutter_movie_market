plugins {
  id "com.android.application"
  id "org.jetbrains.kotlin.android"      // ✅ 하나만 남김
  id "dev.flutter.flutter-gradle-plugin" // 항상 마지막
}

def localProperties = new Properties()
def localPropertiesFile = rootProject.file("local.properties")
if (localPropertiesFile.exists()) {
  localPropertiesFile.withReader("UTF-8") { reader ->
    localProperties.load(reader)
  }
}

def flutterVersionCode = localProperties.getProperty("flutter.versionCode") ?: "1"
def flutterVersionName = localProperties.getProperty("flutter.versionName") ?: "1.0"

android {
  namespace = "com.example.flutter_movie_market"
  compileSdk = flutter.compileSdkVersion
  ndkVersion = flutter.ndkVersion

  compileOptions {
    sourceCompatibility JavaVersion.VERSION_17
    targetCompatibility JavaVersion.VERSION_17
  }
  kotlinOptions {
    jvmTarget = '17'
  }

  defaultConfig {
    applicationId = "com.example.flutter_movie_market"
    minSdk = flutter.minSdkVersion
    targetSdk = flutter.targetSdkVersion
    versionCode = flutterVersionCode.toInteger()
    versionName = flutterVersionName
  }

  buildTypes {
    release {
      signingConfig = signingConfigs.debug
    }
  }
}

flutter {
  source = "../.."
}

kotlin { jvmToolchain(17) }  // 있어도 됨. 제거해도 무방. 중복 설정일 뿐.
